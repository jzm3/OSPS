<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSPS总部系统</title>
    <style>
        /* 全局样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", Arial, sans-serif;
        }

        :root {
            --primary-color: #165DFF;
            --secondary-color: #0F3B99;
            --light-color: #F5F7FA;
            --dark-color: #1D2129;
            --gray-color: #86909C;
            --success-color: #00B42A;
            --danger-color: #F53F3F;
            --white-color: #FFFFFF;
            --border-color: #E5E6EB;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            line-height: 1.6;
        }

        /* 通用组件样式 */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-block;
            padding: 10px 24px;
            background-color: var(--primary-color);
            color: var(--white-color);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
        }

        .btn:hover {
            background-color: var(--secondary-color);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: var(--white-color);
        }

        .btn-danger {
            background-color: var(--danger-color);
        }

        .btn-danger:hover {
            background-color: #D93030;
        }

        .card {
            background-color: var(--white-color);
            border-radius: 8px;
            box-shadow: 0 2px 12px var(--shadow-color);
            padding: 24px;
            margin-bottom: 20px;
        }

        .title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--dark-color);
            text-align: center;
        }

        .subtitle {
            font-size: 18px;
            font-weight: 500;
            margin: 16px 0 12px;
            color: var(--dark-color);
        }

        .text-gray {
            color: var(--gray-color);
        }

        .text-success {
            color: var(--success-color);
        }

        .text-danger {
            color: var(--danger-color);
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .hidden {
            display: none !important;
        }

        /* 导航栏样式 */
        .navbar {
            background-color: var(--white-color);
            border-bottom: 1px solid var(--border-color);
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .navbar-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-logo {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        .navbar-menu {
            display: flex;
            list-style: none;
        }

        .navbar-item {
            margin-left: 32px;
        }

        .navbar-link {
            color: var(--dark-color);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .navbar-link:hover {
            color: var(--primary-color);
        }

        .navbar-link.active {
            color: var(--primary-color);
        }

        /* 登录页面样式 */
        .login-page {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-card {
            width: 100%;
            max-width: 400px;
        }

        .login-title {
            margin-bottom: 24px;
        }

        .login-form {
            margin-top: 16px;
        }

        .login-tip {
            text-align: center;
            margin-top: 16px;
            font-size: 12px;
            color: var(--gray-color);
        }

        /* 主页面样式 */
        .main-page {
            padding: 32px 0;
            min-height: 100vh;
        }

        /* 组织信息样式 */
        .org-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .org-card {
            transition: transform 0.3s ease;
        }

        .org-card:hover {
            transform: translateY(-5px);
        }

        .org-link {
            color: var(--primary-color);
            text-decoration: none;
            word-break: break-all;
        }

        .org-link:hover {
            text-decoration: underline;
        }

        .org-info {
            margin: 8px 0;
            font-size: 14px;
        }

        .org-changelog {
            font-size: 12px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed var(--border-color);
        }

        /* 存档查询样式 */
        .query-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .query-result {
            max-width: 1000px;
            margin: 24px auto 0;
            text-align: left;
            padding: 32px;
        }

        .query-format {
            font-size: 12px;
            margin-top: 4px;
            color: var(--gray-color);
        }

        /* 存档文档详情样式（新增） */
        .archive-document {
            margin-top: 20px;
            padding: 20px;
            background-color: var(--light-color);
            border-radius: 4px;
            border-left: 4px solid var(--primary-color);
        }

        .archive-document h4 {
            font-size: 16px;
            margin-bottom: 16px;
            color: var(--secondary-color);
            text-align: center;
        }

        .archive-document p, .archive-document li {
            font-size: 13px;
            margin-bottom: 8px;
        }

        .archive-document ul {
            margin-left: 20px;
            margin-bottom: 16px;
        }

        .archive-document .section-title {
            font-weight: 600;
            margin: 16px 0 8px;
            color: var(--dark-color);
        }

        .archive-document .signature-area {
            margin-top: 24px;
            display: flex;
            justify-content: space-between;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        /* 响应式样式 */
        @media (max-width: 768px) {
            .navbar-menu {
                display: none;
            }

            .org-grid {
                grid-template-columns: 1fr;
            }

            .navbar-item {
                margin-left: 16px;
            }

            .title {
                font-size: 20px;
            }

            .subtitle {
                font-size: 16px;
            }

            .query-result {
                padding: 16px;
            }

            .archive-document .signature-area {
                flex-direction: column;
                gap: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- 登录页面 -->
    <div id="loginPage" class="login-page">
        <div class="card login-card">
            <h2 class="title login-title">OSPS总部系统 - 登录</h2>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="username" class="form-label">用户名</label>
                    <input type="text" id="username" class="form-input" placeholder="请输入用户名" required>
                </div>
                <div class="form-group">
                    <label for="password" class="form-label">密码</label>
                    <input type="password" id="password" class="form-input" placeholder="请输入密码" required>
                </div>
                <div id="loginError" class="text-danger" style="margin-bottom: 16px; text-align: center; display: none;">
                    用户名或密码错误，请重新输入
                </div>
                <button type="submit" class="btn" style="width: 100%;">登录系统</button>
            </form>
            <p class="login-tip">© 2026 OSPS总部 版权所有</p>
        </div>
    </div>

    <!-- 主页面（登录后显示） -->
    <div id="mainPage" class="main-page hidden">
        <!-- 导航栏 -->
        <nav class="navbar">
            <div class="container navbar-container">
                <a href="#" class="navbar-logo">OSPS总部系统</a>
                <ul class="navbar-menu">
                    <li class="navbar-item"><a href="#home" class="navbar-link active" onclick="switchPage('homePage')">首页</a></li>
                    <li class="navbar-item"><a href="#archive" class="navbar-link" onclick="switchPage('archivePage')">存档查询</a></li>
                    <li class="navbar-item"><a href="#orgs" class="navbar-link" onclick="switchPage('orgsPage')">分组织信息</a></li>
                    <li class="navbar-item"><a href="#about" class="navbar-link" onclick="switchPage('aboutPage')">关于系统</a></li>
                    <li class="navbar-item"><a href="#" class="navbar-link" onclick="logout()">退出登录</a></li>
                </ul>
            </div>
        </nav>

        <!-- 首页内容 -->
        <div id="homePage" class="page-content container">
            <div class="card">
                <h2 class="title">欢迎进入OSPS总部系统</h2>
                <p>OSPS总部是统筹管理OCRFB、S3A、PYTXCN、SFBPT四大分组织的核心平台，负责内部文档归档、组织信息同步、资源统筹调配等核心工作。</p>
                <div class="subtitle">系统核心功能</div>
                <ul style="margin-left: 20px; margin-bottom: 16px;">
                    <li>身份验证：采用SHA512加密算法，保障账户访问安全</li>
                    <li>存档查询：支持标准格式文档编号查询，快速定位内部资料</li>
                    <li>组织信息：同步四大分组织最新官网、功能介绍、下载资源</li>
                    <li>权限管控：防止越权访问，保障内部数据安全</li>
                </ul>
                <div class="subtitle">四大分组织概览</div>
                <div class="org-grid">
                    <div class="card org-card">
                        <h3 style="margin-bottom: 12px;">OCRFB</h3>
                        <p class="text-gray">图像识别工具，支持摄像头实时识别与本地图片识别</p>
                    </div>
                    <div class="card org-card">
                        <h3 style="margin-bottom: 12px;">S3A</h3>
                        <p class="text-gray">Scratch3项目分析工具，提取项目代码与资源信息</p>
                    </div>
                    <div class="card org-card">
                        <h3 style="margin-bottom: 12px;">PYTXCN</h3>
                        <p class="text-gray">Python打包文件解析工具，基于pyinstxtractor扩展</p>
                    </div>
                    <div class="card org-card">
                        <h3 style="margin-bottom: 12px;">SFBPT</h3>
                        <p class="text-gray">超级文件批量处理工具，集成70+种文件处理功能</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 存档查询页面 -->
        <div id="archivePage" class="page-content container hidden">
            <div class="card">
                <h2 class="title">文档存档查询</h2>
                <p style="text-align: center; margin-bottom: 24px;">请输入符合格式的文档编号进行查询</p>
                <form id="archiveForm" class="query-form">
                    <div class="form-group">
                        <label for="archiveNo" class="form-label">文档编号</label>
                        <input type="text" id="archiveNo" class="form-input" placeholder="例如：330324.OSPS/0002:S3A 或 330324.OSPS/D0001:OSPS" required>
                        <div class="query-format">编号格式：地区代码.OSPS/文档编号:分组织（分组织可选：OSPS/OCRFB/S3A/PYTXCN/SFBPT，OSPS代表总部归档）</div>
                    </div>
                    <button type="submit" class="btn" style="width: 100%;">查询存档</button>
                </form>
                <div id="archiveResult" class="query-result card hidden">
                    <h3 id="resultTitle" class="subtitle" style="text-align: center;"></h3>
                    <p id="resultContent" style="margin-top: 16px; text-align: center;"></p>
                    <p id="resultOrg" class="text-gray" style="margin-top: 12px; text-align: center;"></p>
                    <!-- 存档文档详情展示区域 -->
                    <div id="archiveDocuments" class="archive-documents-container"></div>
                </div>
            </div>
        </div>

        <!-- 分组织信息页面 -->
        <div id="orgsPage" class="page-content container hidden">
            <h2 class="title">四大分组织详细信息</h2>

            <!-- OCRFB 信息 -->
            <div class="card org-card">
                <h3 class="subtitle">1. OCRFB</h3>
                <div class="org-info">
                    <strong>当前官网：</strong>
                    <a href="https://jzm3.github.io/ocrfb/" target="_blank" class="org-link">https://jzm3.github.io/ocrfb/</a>
                </div>
                <div class="org-info">
                    <strong>联系方式：</strong>
                    <br>📧 邮箱：ocrfb@outlook.com
                    <br>📞 电话：18157716605
                </div>
                <div class="subtitle">使用方法</div>
                <ul style="margin-left: 20px; margin-bottom: 12px;">
                    <li>基本使用：在桌面上找到快捷方式，双击打开。</li>
                    <li>摄像头识别功能：实时显示摄像头画面，点击"捕获识别"拍摄当前画面进行识别，识别结果在下方文本框显示，可进行复制、清空结果等操作。</li>
                    <li>本地图片识别：支持选择本地图片文件或直接输入图片路径进行识别。</li>
                    <li>退出系统：点击主界面"退出系统"按钮。</li>
                    <li>卸载程序：运行安装目录下的 unins000.exe。</li>
                </ul>
                <div class="subtitle">常见问题</div>
                <ul style="margin-left: 20px; margin-bottom: 12px;">
                    <li>出现「识别错误」提示：请调整拍摄角度或确保图片清晰度。</li>
                    <li>程序未响应：当前版本(v8.5.0.0)存在已知稳定性问题，建议保存进度后重启程序，该问题将在v10.0.0.0重点优化。</li>
                    <li>按钮点击无反应：请检查软件版本或重启程序，若问题依旧可通过邮箱反馈。</li>
                </ul>
                <div class="org-info">
                    <strong>💡 关于 .iocr9 文件：</strong>这是 v9.0.0.0 新增的关联文件，用于指定图片路径、格式和权限，以实现特定或批量识别任务。具体的编写方法请参阅完整的说明文档。
                </div>
                <div class="subtitle">下载资源</div>
                <div class="org-info">
                    <strong>安装包：</strong>
                    <a href="https://github.com/jzm3/OCRFB9/releases/download/%E6%AD%A3%E5%BC%8F%E7%89%88/OCRApp7.0_Setup.exe" target="_blank" class="org-link">OCRApp7.0_Setup.exe</a>
                </div>
                <div class="org-info">
                    <strong>说明文档：</strong>
                    <a href="https://github.com/jzm3/OCRFB9/releases/download/%E6%AD%A3%E5%BC%8F%E7%89%88/OCR7.0.docx" target="_blank" class="org-link">OCR7.0.docx</a>
                </div>
                <div class="org-changelog">© 2025 OCRFB 项目组. 本页面为软件信息发布页。</div>
            </div>

            <!-- S3A 信息 -->
            <div class="card org-card">
                <h3 class="subtitle">2. S3A</h3>
                <div class="org-info">
                    <strong>PYPI官网：</strong>
                    <a href="https://pypi.org/project/scratch3-analyzer/" target="_blank" class="org-link">https://pypi.org/project/scratch3-analyzer/</a>
                </div>
                <div class="org-info">
                    <strong>当前官网：</strong>
                    <a href="https://jzm3.github.io/S3A/" target="_blank" class="org-link">https://jzm3.github.io/S3A/</a>
                </div>
                <div class="subtitle">核心功能</div>
                <ul style="margin-left: 20px; margin-bottom: 12px;">
                    <li>代码提取：从.sb3文件中提取所有代码块，包括事件、控制、运算等类别。</li>
                    <li>资源分析：获取项目中使用的所有精灵、背景、声音等资源信息。</li>
                    <li>项目统计：生成详细的项目统计数据，包括代码块数量、变量、自定义模块等。</li>
                    <li>数据导出：将分析结果导出为JSON、CSV等多种格式，便于进一步处理。</li>
                </ul>
                <div class="subtitle">快速使用示例</div>
                <pre style="background-color: var(--light-color); padding: 16px; border-radius: 4px; font-size: 12px; margin-bottom: 12px; overflow-x: auto;">
# 安装scratch3-analyzer
pip install scratch3-analyzer

# 基本用法
from scratch3_analyzer import ScratchProject

# 加载Scratch项目
project = ScratchProject("my_project.sb3")

# 获取项目基本信息
info = project.get_project_info()
print(f"项目名称: {info['name']}")

# 导出分析结果
project.export_to_json("analysis_result.json")</pre>
            </div>

            <!-- PYTXCN 信息 -->
            <div class="card org-card">
                <h3 class="subtitle">3. PYTXCN</h3>
                <div class="org-info">
                    <strong>PYPI官网：</strong>
                    <a href="https://pypi.org/project/pyinstxtractorcn/" target="_blank" class="org-link">https://pypi.org/project/pyinstxtractorcn/</a>
                </div>
                <div class="org-info">
                    <strong>当前官网：</strong>
                    <a href="https://jzm3.github.io/pyinstxtractorCN/" target="_blank" class="org-link">https://jzm3.github.io/pyinstxtractorCN/</a>
                </div>
                <div class="org-info">
                    <strong>GUI版本官网：</strong>
                    <a href="https://jzm3.github.io/pyinstxtractorcnGUI/" target="_blank" class="org-link">https://jzm3.github.io/pyinstxtractorcnGUI/</a>
                </div>
                <div class="org-info">
                    <strong>核心定位：</strong>基于pyinstxtractor核心技术，提供针对Python打包文件的解析工具，支持提取打包后的Python程序资源，助力开发者进行程序调试与分析。
                </div>
            </div>

            <!-- SFBPT 信息 -->
            <div class="card org-card">
                <h3 class="subtitle">4. SFBPT</h3>
                <div class="org-info">
                    <strong>当前官网：</strong>
                    <a href="https://jzm3.github.io/sfbpt/" target="_blank" class="org-link">https://jzm3.github.io/sfbpt/</a>
                </div>
                <div class="org-info">
                    <strong>软件简介：</strong>超级文件批量处理工具，70+种文件处理功能集于一身，专业级的文件批量处理解决方案。重命名、格式转换、图片处理、文件加密等强大功能，让文件管理变得简单高效。
                </div>
                <div class="subtitle">核心功能分类</div>
                <ul style="margin-left: 20px; margin-bottom: 12px;">
                    <li>批量重命名：支持正则表达式、序列号、大小写转换等多种模式。</li>
                    <li>格式转换：支持图片、文档、音频、视频等多种格式一键批量转换。</li>
                    <li>图片处理：批量缩放、旋转、滤镜、水印、亮度对比度调整。</li>
                    <li>文件安全：AES-256加密/解密、数字签名、权限管理、安全删除。</li>
                    <li>高级工具：文件去重、合并/分割、内容搜索替换、磁盘空间分析。</li>
                </ul>
                <div class="org-info">
                    <strong>当前版本：</strong>v2.5.1.1 专业版（Windows 64位）
                </div>
                <div class="org-info">
                    <strong>联系反馈：</strong>jzm001687@outlook.com
                </div>
            </div>
        </div>

        <!-- 关于系统页面 -->
        <div id="aboutPage" class="page-content container hidden">
            <div class="card">
                <h2 class="title">关于OSPS总部系统</h2>
                <div class="subtitle">系统版本</div>
                <p>v1.0.0 - 正式版</p>
                <div class="subtitle">安全机制</div>
                <ul style="margin-left: 20px; margin-bottom: 12px;">
                    <li>身份验证：采用SHA512加密算法，将用户输入的账号密码转换为哈希值后与预置数据比对。</li>
                    <li>权限管控：所有页面均需验证登录状态，禁止通过修改URL跳过登录。</li>
                    <li>单页架构：所有功能集成在单个HTML文件，减少外部依赖，提升安全性。</li>
                </ul>
                <div class="subtitle">合法用户</div>
                <p>系统预置2名合法用户，账号密码均通过SHA512加密存储，仅支持内部人员访问。</p>
                <div class="subtitle">免责声明</div>
                <p>本系统仅用于OSPS内部组织管理，所有分组织的外部资源均指向各自官方平台，OSPS总部不承担外部资源的维护与更新责任。</p>
                <div class="subtitle">版权信息</div>
                <p>© 2026 OSPS总部 版权所有，禁止未授权传播与使用。</p>
            </div>
        </div>

        <!-- 页脚 -->
        <footer class="footer">
            <div class="container">
                <p>OSPS总部系统 © 2026 版权所有</p>
                <p style="margin-top: 8px; font-size: 12px;">统筹管理：OCRFB / S3A / PYTXCN / SFBPT</p>
            </div>
        </footer>
    </div>

    <script>
        // 全局变量：登录状态标识
        let isLoggedIn = false;

        // 预置合法用户的SHA512哈希值
        const validUsers = [
            {
                usernameHash: "A816E9D826513F270663B1C7047A329C298E2A5FF31B193E170F6D4BDE6955B4AAFD06DDF55C1F91B9D2B446CD51E1A3AADB56F93D9DAC09E50759B67A5FEBFA",
                passwordHash: "F6008842F1FE8A427B248A13D10DE4C2953E789C05B55942ECAB023922692EABE8472E530014038EE9281359B1A9783A7268B62DEA365BDC8EEC25760DF5107E"
            },
            {
                usernameHash: "91BE95855D461E96401605EAA1DF4D826CA000D1EE1935806829BF089AA1A4B134252540934E66A3EB135CEDD97C83436B05F53D586933FF669223A03DC5102E",
                passwordHash: "3B6CE52F3D34A563DF81CFAC422455616F28779C106D54B0EB813483F0AED7BF94DFCF831C8FE08EC9BA2441282596ABF58658A3078EC72B11830D8130B2FA82"
            }
        ];

        // 合法分组织列表
        const validOrgs = ["OSPS", "OCRFB", "S3A", "PYTXCN", "SFBPT"];

        // 预置存档文档数据（完整）
        const archiveDocLibrary = {
            "330324.OSPS/0002:S3A": {
                docs: [
                    {
                        title: "scratch3-analyzer 项目开发阶段保密协议",
                        content: `
<p>甲方：JZM（scratch3-analyzer 项目主导方）</p>
<p>乙方：JYL（合作参与方）</p>
<p>鉴于乙方将参与 scratch3-analyzer 项目（以下简称“本项目”）各版本的开发与优化工作，在每个版本开发过程中可能接触、知悉该版本未开源阶段的核心技术、开发文档等保密信息，为保护本项目各版本开发阶段的知识产权及商业秘密，明确双方权利义务，甲乙双方本着平等自愿、诚实信用的原则，达成如下保密协议，以资共同遵守：</p>

<div class="section-title">一、保密信息定义及范围</div>
<p>1.1 本协议所称“保密信息”，指乙方在参与本项目任一版本开发过程中，通过任何形式（包括但不限于书面文件、电子数据、口头沟通、现场演示等）从甲方获取或知悉的，与该版本相关且未公开的所有信息。</p>
<p>1.2 保密信息具体包括但不限于：</p>
<ul>
    <li>本项目的技术方案、核心算法、代码片段、程序原型、开发工具配置；</li>
    <li>项目开发计划、需求文档、测试报告、版本迭代规划；</li>
    <li>本项目相关的客户信息、合作方信息、商业合作计划及未公开的运营数据；</li>
    <li>甲乙双方就本项目合作过程中产生的所有沟通记录、合作方案及未公开的约定事项。</li>
</ul>
<p>1.3 以下信息不属于保密信息：（1）已通过合法渠道公开的信息；（2）乙方在未接触甲方保密信息的情况下，独立研发获得的相同或类似信息；（3）乙方从第三方合法获取的、且该第三方有权向乙方披露的信息；（4）依据法律法规、司法机关或行政机关的强制性要求，乙方必须披露的信息（但乙方应在披露前及时通知甲方，并配合甲方采取合理的保密措施）。</p>

<div class="section-title">二、保密义务</div>
<p>2.1 乙方承诺，对其接触、知悉的本协议约定的保密信息严格保密，不得向任何第三方（包括但不限于无关的个人、单位、组织）披露、泄露、传播，不得将保密信息用于与本项目合作无关的任何目的。</p>
<p>2.2 乙方应采取合理的保密措施（包括但不限于妥善保管承载保密信息的文件、设备，设置访问权限，限制知悉保密信息的人员范围等），防止保密信息被泄露、窃取或滥用。</p>
<p>2.3 乙方仅可在本项目开发所需的范围内，向其内部直接参与本项目的相关人员披露保密信息，且需确保该等人员遵守本协议约定的保密义务，并对该等人员的行为承担连带保密责任。</p>
<p>2.4 本协议约定的保密义务，仅针对本项目当前开发版本有效；在该版本完成开源后，针对该版本的保密义务自动终止，但乙方在该版本开发期间因违反保密义务产生的责任不受影响。同时，本协议自动对本项目下一个开发版本生效，保密义务同步适用于下一个版本的未开源保密信息。</p>

<div class="section-title">三、保密信息的使用限制</div>
<p>3.1 乙方仅可将保密信息用于本项目的开发、优化、测试、文档完善等合作相关的工作，不得利用保密信息从事任何损害甲方利益或与本项目合作无关的商业活动或其他行为。</p>
<p>3.2 未经甲方书面同意，乙方不得复制、摘抄、篡改保密信息，不得将保密信息转让、赠与、出租、抵押或以其他任何形式处分。</p>

<div class="section-title">四、协议生效与终止</div>
<p>4.1 本协议自甲乙双方达成合作意向、确认同意合作之日起立即生效，且对本项目当前及后续所有开发版本均具有约束力（按本协议约定逐版本自动适用）。</p>
<p>4.2 本协议针对本项目单个开发版本的效力，自该版本开发工作启动之日起，至该版本完成开源之日止自动解除；若单个版本最终未实现开源，针对该版本的协议效力持续至相关保密信息成为公开信息之日止。</p>
<p>4.3 针对某一版本的协议效力解除后，不影响乙方在该版本开发期间已产生的保密义务及可能存在的违约责任；乙方仍需对其在该版本开发过程中接触、知悉的保密信息承担此前已产生的保密责任。</p>

<div class="section-title">五、违约责任</div>
<p>5.1 若乙方违反本协议约定，向第三方披露、泄露保密信息，或违反保密信息使用限制，给甲方造成损失的，乙方应承担全部赔偿责任（包括但不限于直接经济损失、间接经济损失、为维权支出的律师费、诉讼费等合理费用）。</p>
<p>5.2 若因乙方违反保密义务导致甲方的知识产权被侵害或商业秘密被泄露，甲方有权单方终止与乙方的合作，并要求乙方承担相应的法律责任。</p>

<div class="section-title">六、其他</div>
<p>6.1 本协议未尽事宜，由甲乙双方协商一致后签订补充协议，补充协议与本协议具有同等法律效力。</p>
<p>6.2 因本协议引起的或与本协议有关的任何争议，双方应首先通过友好协商解决；协商不成的，任何一方均有权向甲方所在地有管辖权的人民法院提起诉讼。</p>
<p>6.3 本协议一式两份，甲乙双方各执一份，具有同等法律效力。</p>

<p style="text-align: center;">（以下无正文）</p>

<div class="signature-area">
    <div>
        <p>甲方（签字）：__________</p>
        <p>日期：__________</p>
    </div>
    <div>
        <p>乙方（签字）：__________</p>
        <p>日期：__________</p>
    </div>
</div>
                        `
                    },
                    {
                        title: "scratch3-analyzer 2.0.0 版本开发规划文档",
                        content: `
<div class="section-title">一、开发核心目标</div>
<p>在 1.x 版本“Scratch 3.0 项目解析、分析与统计导出”核心功能基础上，完成 2.0.0 版本重大升级，核心目标为：实现 Scratch 3.0 原生代码块（插件除外）的全量识别与 Python 代码自动转换，保证转换后代码运行效果与原 Scratch 项目一致；同步实现资源与代码的统一管理，并通过增强版 GUI 提供可视化排版、效果预览等交互功能，最终达成“多场景支持、高兼容性、强易用性”的 Python 工具库升级目标。</p>

<div class="section-title">二、预期实现功能</div>
<p>2.1 保留 1.x 版本既有功能</p>
<ul>
    <li>Scratch 3.0 项目文件（.sb3）解析与提取功能</li>
    <li>角色、代码块、变量、列表、造型、音效、事件等核心元素分析</li>
    <li>项目复杂度评分计算</li>
    <li>分析结果多工作表 Excel 导出</li>
    <li>多 .sb3 文件批量处理</li>
    <li>命令行（CLI）交互支持</li>
    <li>图形用户界面（GUI）基础交互</li>
    <li>Python API 编程调用支持</li>
</ul>

<p>2.2 2.0.0 版本新增核心功能（必须实现）</p>
<ol>
    <li>全量代码块识别与 Python 转换
        <ul>
            <li>支持除第三方插件外所有 Scratch 3.0 原生代码块的精准识别</li>
            <li>实现识别后代码块到 Python 可执行代码的自动编译转换</li>
            <li>转换后 Python 代码运行效果与原 Scratch 项目完全一致（含角色运动、事件响应、变量交互、音效播放等所有核心逻辑）</li>
        </ul>
    </li>
    <li>资源与代码统一管理
        <ul>
            <li>自动提取 .sb3 文件内置资源（图片、音效等）</li>
            <li>支持用户自定义导出目录，将提取的资源与转换后的 Python 代码统一整理至该目录</li>
            <li>采用 Python 相对路径配置资源引用，确保导出后无需额外配置即可直接运行</li>
        </ul>
    </li>
    <li>多场景转换功能支持
        <ul>
            <li>Python API 支持代码转换与资源导出</li>
            <li>CLI 终端支持单文件/批量文件转换、资源目录配置等操作</li>
            <li>增强版 GUI 支持可视化操作完成代码转换与资源导出</li>
        </ul>
    </li>
    <li>增强版 GUI 专属功能
        <ul>
            <li>仿正版 Scratch 3.0 的代码块可视化排版（默认自动排版，避免语法/逻辑报错）</li>
            <li>支持转换后代码块的运行效果实时预览，还原 Scratch 运行场景</li>
            <li>ROOT 权限控制（非登录制）：
                <ul>
                    <li>首次调用库时询问并加密保存 ROOT 密码，仅用于自定义代码块位置</li>
                    <li>自定义代码块位置需同时验证 ROOT 权限与 .sb3 文件所有权</li>
                    <li>无 ROOT 权限用户禁止直接修改代码块，防止运行异常</li>
                </ul>
            </li>
            <li>支持转换结果预览、一键导出至指定目录</li>
        </ul>
    </li>
</ol>

<p>2.3 优化功能</p>
<ul>
    <li>核心分析引擎优化：提升代码块识别精度与解析效率</li>
    <li>GUI 框架升级：从原生 tkinter 升级为 customtkinter，优化界面美观度与交互流畅性</li>
    <li>Excel 导出功能优化：新增代码转换结果统计工作表</li>
    <li>CLI 交互优化：增强错误提示、操作引导，新增转换相关命令</li>
    <li>兼容性优化：提升不同 Python 版本（3.7+）、不同格式 .sb3 文件的适配性</li>
</ul>

<div class="section-title">三、开发流程规划</div>
<p>阶段一：需求梳理与技术方案设计（预计 5 个工作日）</p>
<ol>
    <li>细化功能需求：明确各模块输入输出、交互逻辑、异常处理规则</li>
    <li>技术方案确认：
        <ul>
            <li>代码块识别方案：基于 Scratch 3.0 代码块规范，定义识别规则与数据结构</li>
            <li>Scratch-Python 映射方案：建立全量原生代码块与 Python 语法的映射关系，确保逻辑一致性</li>
            <li>资源提取与管理方案：确定 .sb3 资源提取方式、目录组织结构、相对路径配置规则</li>
            <li>GUI 实现方案：基于 customtkinter + pygame 设计界面布局、交互流程</li>
            <li>ROOT 权限管理方案：设计密码加密存储、验证逻辑，文件所有权校验方式</li>
        </ul>
    </li>
    <li>开发计划拆解：明确各模块开发优先级、时间节点、依赖关系</li>
    <li>文档输出：《2.0.0 版本需求规格说明书》《技术方案设计文档》</li>
</ol>

<p>阶段二：核心模块开发（预计 20 个工作日）</p>
<ol>
    <li>基础模块开发（5 个工作日）：
        <ul>
            <li>scratch_code_parser.py：实现 Scratch 代码块解析与识别功能</li>
            <li>root_permission_handler.py：实现 ROOT 权限的创建、加密、验证、存储功能</li>
        </ul>
    </li>
    <li>核心功能开发（10 个工作日）：
        <ul>
            <li>scratch_to_python_converter.py：实现代码块到 Python 代码的转换逻辑，确保运行效果一致</li>
            <li>resource_manager.py：实现 .sb3 资源提取、整理、相对路径配置功能</li>
        </ul>
    </li>
    <li>交互模块开发（5 个工作日）：
        <ul>
            <li>API 接口封装：新增代码转换、资源导出相关 API，兼容原有接口</li>
            <li>CLI 命令开发：新增 convert、batch-convert 命令，完善参数配置</li>
        </ul>
    </li>
</ol>

<p>阶段三：增强版 GUI 开发（预计 10 个工作日）</p>
<ol>
    <li>gui_enhanced.py 开发：基于技术方案实现界面布局（文件选择、功能配置、结果预览、可视化排版等模块）</li>
    <li>可视化排版功能实现：仿 Scratch 3.0 样式渲染代码块，实现自动排版逻辑</li>
    <li>效果预览功能实现：集成 pygame 实现代码块运行效果预览</li>
    <li>ROOT 权限交互实现：密码验证弹窗、代码块锁定/解锁逻辑、位置调整功能</li>
    <li>导出与配置保存功能实现：一键导出、配置记忆功能</li>
</ol>

<p>阶段四：集成测试与优化（预计 10 个工作日）</p>
<ol>
    <li>单元测试：对各模块功能进行独立测试，覆盖正常场景与异常场景（如损坏 .sb3 文件、特殊代码块组合等）</li>
    <li>集成测试：验证模块间交互逻辑（如解析-转换-导出全流程、GUI 与核心模块联动等）</li>
    <li>性能测试：测试批量转换复杂项目时的效率，优化性能瓶颈</li>
    <li>兼容性测试：验证不同 Python 版本（3.7+）、不同操作系统（Windows/macOS/Linux）、不同格式 .sb3 文件的适配性</li>
    <li>Bug 修复与优化：针对测试中发现的问题进行修复，优化交互体验与运行稳定性</li>
</ol>

<p>阶段五：文档完善与发布准备（预计 5 个工作日）</p>
<ol>
    <li>开发文档完善：更新 API 文档、CLI 使用说明、GUI 操作指南</li>
    <li>用户文档编写：《2.0.0 版本快速上手指南》《常见问题解答》</li>
    <li>发布准备：整理依赖包、构建项目包、配置 PyPI 发布信息</li>
    <li>内部验收：确认功能完整性、文档完整性、运行稳定性，准备正式发布</li>
</ol>

<div class="section-title">四、开发交付物</div>
<ul>
    <li>scratch3-analyzer 2.0.0 版本源代码（含新增 4 个核心模块：scratch_code_parser.py、scratch_to_python_converter.py、resource_manager.py、gui_enhanced.py、root_permission_handler.py）</li>
    <li>开发相关文档：需求规格说明书、技术方案设计文档、测试报告</li>
    <li>用户相关文档：API 文档、CLI 使用手册、GUI 操作指南、快速上手指南</li>
    <li>PyPI 发布包、GitHub 发布版本（含 Changelog）</li>
</ul>

<div class="section-title">五、关键依赖与风险提示</div>
<p>5.1 核心依赖</p>
<ul>
    <li>基础依赖：Python 3.7+、pandas ≥1.3.0、openpyxl ≥3.0.0、zipfile36 ≥0.1.3、Pillow ≥9.0.0、simpleaudio ≥1.0.4、astor ≥0.8.1</li>
    <li>GUI 依赖：customtkinter ≥5.2.0、pygame ≥2.1.0</li>
</ul>

<p>5.2 风险提示与应对方案</p>
<ol>
    <li>风险 1：部分特殊 Scratch 代码块转换逻辑复杂，难以保证运行效果一致
        <ul>
            <li>应对：提前梳理特殊代码块清单，单独设计映射逻辑；增加多轮测试，针对异常场景优化转换算法</li>
        </ul>
    </li>
    <li>风险 2：GUI 可视化排版与效果预览功能兼容性差，不同系统显示/运行效果不一致
        <ul>
            <li>应对：基于主流操作系统进行适配开发；采用自适应布局；预览功能增加兼容性检测与降级处理</li>
        </ul>
    </li>
    <li>风险 3：批量转换复杂项目时性能瓶颈明显
        <ul>
            <li>应对：优化资源提取与代码转换逻辑，采用异步处理；增加进度条提示，提升用户体验</li>
        </ul>
    </li>
</ol>
                        `
                    }
                ]
            },
            "330324.OSPS/0004:S3A": {
                docs: [
                    {
                        title: "scratch3-analyzer 项目开发阶段保密协议",
                        content: `
<p>甲方：JZM（scratch3-analyzer 项目主导方）</p>
<p>乙方：JYL（合作参与方）</p>
<p>鉴于乙方将参与 scratch3-analyzer 项目（以下简称“本项目”）各版本的开发与优化工作，在每个版本开发过程中可能接触、知悉该版本未开源阶段的核心技术、开发文档等保密信息，为保护本项目各版本开发阶段的知识产权及商业秘密，明确双方权利义务，甲乙双方本着平等自愿、诚实信用的原则，达成如下保密协议，以资共同遵守：</p>

<div class="section-title">一、保密信息定义及范围</div>
<p>1.1 本协议所称“保密信息”，指乙方在参与本项目任一版本开发过程中，通过任何形式（包括但不限于书面文件、电子数据、口头沟通、现场演示等）从甲方获取或知悉的，与该版本相关且未公开的所有信息。</p>
<p>1.2 保密信息具体包括但不限于：</p>
<ul>
    <li>本项目的技术方案、核心算法、代码片段、程序原型、开发工具配置；</li>
    <li>项目开发计划、需求文档、测试报告、版本迭代规划；</li>
    <li>本项目相关的客户信息、合作方信息、商业合作计划及未公开的运营数据；</li>
    <li>甲乙双方就本项目合作过程中产生的所有沟通记录、合作方案及未公开的约定事项。</li>
</ul>
<p>1.3 以下信息不属于保密信息：（1）已通过合法渠道公开的信息；（2）乙方在未接触甲方保密信息的情况下，独立研发获得的相同或类似信息；（3）乙方从第三方合法获取的、且该第三方有权向乙方披露的信息；（4）依据法律法规、司法机关或行政机关的强制性要求，乙方必须披露的信息（但乙方应在披露前及时通知甲方，并配合甲方采取合理的保密措施）。</p>

<div class="section-title">二、保密义务</div>
<p>2.1 乙方承诺，对其接触、知悉的本协议约定的保密信息严格保密，不得向任何第三方（包括但不限于无关的个人、单位、组织）披露、泄露、传播，不得将保密信息用于与本项目合作无关的任何目的。</p>
<p>2.2 乙方应采取合理的保密措施（包括但不限于妥善保管承载保密信息的文件、设备，设置访问权限，限制知悉保密信息的人员范围等），防止保密信息被泄露、窃取或滥用。</p>
<p>2.3 乙方仅可在本项目开发所需的范围内，向其内部直接参与本项目的相关人员披露保密信息，且需确保该等人员遵守本协议约定的保密义务，并对该等人员的行为承担连带保密责任。</p>
<p>2.4 本协议约定的保密义务，仅针对本项目当前开发版本有效；在该版本完成开源后，针对该版本的保密义务自动终止，但乙方在该版本开发期间因违反保密义务产生的责任不受影响。同时，本协议自动对本项目下一个开发版本生效，保密义务同步适用于下一个版本的未开源保密信息。</p>

<div class="section-title">三、保密信息的使用限制</div>
<p>3.1 乙方仅可将保密信息用于本项目的开发、优化、测试、文档完善等合作相关的工作，不得利用保密信息从事任何损害甲方利益或与本项目合作无关的商业活动或其他行为。</p>
<p>3.2 未经甲方书面同意，乙方不得复制、摘抄、篡改保密信息，不得将保密信息转让、赠与、出租、抵押或以其他任何形式处分。</p>

<div class="section-title">四、协议生效与终止</div>
<p>4.1 本协议自甲乙双方达成合作意向、确认同意合作之日起立即生效，且对本项目当前及后续所有开发版本均具有约束力（按本协议约定逐版本自动适用）。</p>
<p>4.2 本协议针对本项目单个开发版本的效力，自该版本开发工作启动之日起，至该版本完成开源之日止自动解除；若单个版本最终未实现开源，针对该版本的协议效力持续至相关保密信息成为公开信息之日止。</p>
<p>4.3 针对某一版本的协议效力解除后，不影响乙方在该版本开发期间已产生的保密义务及可能存在的违约责任；乙方仍需对其在该版本开发过程中接触、知悉的保密信息承担此前已产生的保密责任。</p>

<div class="section-title">五、违约责任</div>
<p>5.1 若乙方违反本协议约定，向第三方披露、泄露保密信息，或违反保密信息使用限制，给甲方造成损失的，乙方应承担全部赔偿责任（包括但不限于直接经济损失、间接经济损失、为维权支出的律师费、诉讼费等合理费用）。</p>
<p>5.2 若因乙方违反保密义务导致甲方的知识产权被侵害或商业秘密被泄露，甲方有权单方终止与乙方的合作，并要求乙方承担相应的法律责任。</p>

<div class="section-title">六、其他</div>
<p>6.1 本协议未尽事宜，由甲乙双方协商一致后签订补充协议，补充协议与本协议具有同等法律效力。</p>
<p>6.2 因本协议引起的或与本协议有关的任何争议，双方应首先通过友好协商解决；协商不成的，任何一方均有权向甲方所在地有管辖权的人民法院提起诉讼。</p>
<p>6.3 本协议一式两份，甲乙双方各执一份，具有同等法律效力。</p>

<p style="text-align: center;">（以下无正文）</p>

<div class="signature-area">
    <div>
        <p>甲方（签字）：__________</p>
        <p>日期：__________</p>
    </div>
    <div>
        <p>乙方（签字）：__________</p>
        <p>日期：__________</p>
    </div>
</div>
                        `
                    },
                    {
                        title: "scratch3-analyzer 2.0.0 版本开发规划文档",
                        content: `
<div class="section-title">一、开发核心目标</div>
<p>在 1.x 版本“Scratch 3.0 项目解析、分析与统计导出”核心功能基础上，完成 2.0.0 版本重大升级，核心目标为：实现 Scratch 3.0 原生代码块（插件除外）的全量识别与 Python 代码自动转换，保证转换后代码运行效果与原 Scratch 项目一致；同步实现资源与代码的统一管理，并通过增强版 GUI 提供可视化排版、效果预览等交互功能，最终达成“多场景支持、高兼容性、强易用性”的 Python 工具库升级目标。</p>

<div class="section-title">二、预期实现功能</div>
<p>2.1 保留 1.x 版本既有功能</p>
<ul>
    <li>Scratch 3.0 项目文件（.sb3）解析与提取功能</li>
    <li>角色、代码块、变量、列表、造型、音效、事件等核心元素分析</li>
    <li>项目复杂度评分计算</li>
    <li>分析结果多工作表 Excel 导出</li>
    <li>多 .sb3 文件批量处理</li>
    <li>命令行（CLI）交互支持</li>
    <li>图形用户界面（GUI）基础交互</li>
    <li>Python API 编程调用支持</li>
</ul>

<p>2.2 2.0.0 版本新增核心功能（必须实现）</p>
<ol>
    <li>全量代码块识别与 Python 转换
        <ul>
            <li>支持除第三方插件外所有 Scratch 3.0 原生代码块的精准识别</li>
            <li>实现识别后代码块到 Python 可执行代码的自动编译转换</li>
            <li>转换后 Python 代码运行效果与原 Scratch 项目完全一致（含角色运动、事件响应、变量交互、音效播放等所有核心逻辑）</li>
        </ul>
    </li>
    <li>资源与代码统一管理
        <ul>
            <li>自动提取 .sb3 文件内置资源（图片、音效等）</li>
            <li>支持用户自定义导出目录，将提取的资源与转换后的 Python 代码统一整理至该目录</li>
            <li>采用 Python 相对路径配置资源引用，确保导出后无需额外配置即可直接运行</li>
        </ul>
    </li>
    <li>多场景转换功能支持
        <ul>
            <li>Python API 支持代码转换与资源导出</li>
            <li>CLI 终端支持单文件/批量文件转换、资源目录配置等操作</li>
            <li>增强版 GUI 支持可视化操作完成代码转换与资源导出</li>
        </ul>
    </li>
    <li>增强版 GUI 专属功能
        <ul>
            <li>仿正版 Scratch 3.0 的代码块可视化排版（默认自动排版，避免语法/逻辑报错）</li>
            <li>支持转换后代码块的运行效果实时预览，还原 Scratch 运行场景</li>
            <li>ROOT 权限控制（非登录制）：
                <ul>
                    <li>首次调用库时询问并加密保存 ROOT 密码，仅用于自定义代码块位置</li>
                    <li>自定义代码块位置需同时验证 ROOT 权限与 .sb3 文件所有权</li>
                    <li>无 ROOT 权限用户禁止直接修改代码块，防止运行异常</li>
                </ul>
            </li>
            <li>支持转换结果预览、一键导出至指定目录</li>
        </ul>
    </li>
</ol>

<p>2.3 优化功能</p>
<ul>
    <li>核心分析引擎优化：提升代码块识别精度与解析效率</li>
    <li>GUI 框架升级：从原生 tkinter 升级为 customtkinter，优化界面美观度与交互流畅性</li>
    <li>Excel 导出功能优化：新增代码转换结果统计工作表</li>
    <li>CLI 交互优化：增强错误提示、操作引导，新增转换相关命令</li>
    <li>兼容性优化：提升不同 Python 版本（3.7+）、不同格式 .sb3 文件的适配性</li>
</ul>

<div class="section-title">三、开发流程规划</div>
<p>阶段一：需求梳理与技术方案设计（预计 5 个工作日）</p>
<ol>
    <li>细化功能需求：明确各模块输入输出、交互逻辑、异常处理规则</li>
    <li>技术方案确认：
        <ul>
            <li>代码块识别方案：基于 Scratch 3.0 代码块规范，定义识别规则与数据结构</li>
            <li>Scratch-Python 映射方案：建立全量原生代码块与 Python 语法的映射关系，确保逻辑一致性</li>
            <li>资源提取与管理方案：确定 .sb3 资源提取方式、目录组织结构、相对路径配置规则</li>
            <li>GUI 实现方案：基于 customtkinter + pygame 设计界面布局、交互流程</li>
            <li>ROOT 权限管理方案：设计密码加密存储、验证逻辑，文件所有权校验方式</li>
        </ul>
    </li>
    <li>开发计划拆解：明确各模块开发优先级、时间节点、依赖关系</li>
    <li>文档输出：《2.0.0 版本需求规格说明书》《技术方案设计文档》</li>
</ol>

<p>阶段二：核心模块开发（预计 20 个工作日）</p>
<ol>
    <li>基础模块开发（5 个工作日）：
        <ul>
            <li>scratch_code_parser.py：实现 Scratch 代码块解析与识别功能</li>
            <li>root_permission_handler.py：实现 ROOT 权限的创建、加密、验证、存储功能</li>
        </ul>
    </li>
    <li>核心功能开发（10 个工作日）：
        <ul>
            <li>scratch_to_python_converter.py：实现代码块到 Python 代码的转换逻辑，确保运行效果一致</li>
            <li>resource_manager.py：实现 .sb3 资源提取、整理、相对路径配置功能</li>
        </ul>
    </li>
    <li>交互模块开发（5 个工作日）：
        <ul>
            <li>API 接口封装：新增代码转换、资源导出相关 API，兼容原有接口</li>
            <li>CLI 命令开发：新增 convert、batch-convert 命令，完善参数配置</li>
        </ul>
    </li>
</ol>

<p>阶段三：增强版 GUI 开发（预计 10 个工作日）</p>
<ol>
    <li>gui_enhanced.py 开发：基于技术方案实现界面布局（文件选择、功能配置、结果预览、可视化排版等模块）</li>
    <li>可视化排版功能实现：仿 Scratch 3.0 样式渲染代码块，实现自动排版逻辑</li>
    <li>效果预览功能实现：集成 pygame 实现代码块运行效果预览</li>
    <li>ROOT 权限交互实现：密码验证弹窗、代码块锁定/解锁逻辑、位置调整功能</li>
    <li>导出与配置保存功能实现：一键导出、配置记忆功能</li>
</ol>

<p>阶段四：集成测试与优化（预计 10 个工作日）</p>
<ol>
    <li>单元测试：对各模块功能进行独立测试，覆盖正常场景与异常场景（如损坏 .sb3 文件、特殊代码块组合等）</li>
    <li>集成测试：验证模块间交互逻辑（如解析-转换-导出全流程、GUI 与核心模块联动等）</li>
    <li>性能测试：测试批量转换复杂项目时的效率，优化性能瓶颈</li>
    <li>兼容性测试：验证不同 Python 版本（3.7+）、不同操作系统（Windows/macOS/Linux）、不同格式 .sb3 文件的适配性</li>
    <li>Bug 修复与优化：针对测试中发现的问题进行修复，优化交互体验与运行稳定性</li>
</ol>

<p>阶段五：文档完善与发布准备（预计 5 个工作日）</p>
<ol>
    <li>开发文档完善：更新 API 文档、CLI 使用说明、GUI 操作指南</li>
    <li>用户文档编写：《2.0.0 版本快速上手指南》《常见问题解答》</li>
    <li>发布准备：整理依赖包、构建项目包、配置 PyPI 发布信息</li>
    <li>内部验收：确认功能完整性、文档完整性、运行稳定性，准备正式发布</li>
</ol>

<div class="section-title">四、开发交付物</div>
<ul>
    <li>scratch3-analyzer 2.0.0 版本源代码（含新增 4 个核心模块：scratch_code_parser.py、scratch_to_python_converter.py、resource_manager.py、gui_enhanced.py、root_permission_handler.py）</li>
    <li>开发相关文档：需求规格说明书、技术方案设计文档、测试报告</li>
    <li>用户相关文档：API 文档、CLI 使用手册、GUI 操作指南、快速上手指南</li>
    <li>PyPI 发布包、GitHub 发布版本（含 Changelog）</li>
</ul>

<div class="section-title">五、关键依赖与风险提示</div>
<p>5.1 核心依赖</p>
<ul>
    <li>基础依赖：Python 3.7+、pandas ≥1.3.0、openpyxl ≥3.0.0、zipfile36 ≥0.1.3、Pillow ≥9.0.0、simpleaudio ≥1.0.4、astor ≥0.8.1</li>
    <li>GUI 依赖：customtkinter ≥5.2.0、pygame ≥2.1.0</li>
</ul>

<p>5.2 风险提示与应对方案</p>
<ol>
    <li>风险 1：部分特殊 Scratch 代码块转换逻辑复杂，难以保证运行效果一致
        <ul>
            <li>应对：提前梳理特殊代码块清单，单独设计映射逻辑；增加多轮测试，针对异常场景优化转换算法</li>
        </ul>
    </li>
    <li>风险 2：GUI 可视化排版与效果预览功能兼容性差，不同系统显示/运行效果不一致
        <ul>
            <li>应对：基于主流操作系统进行适配开发；采用自适应布局；预览功能增加兼容性检测与降级处理</li>
        </ul>
    </li>
    <li>风险 3：批量转换复杂项目时性能瓶颈明显
        <ul>
            <li>应对：优化资源提取与代码转换逻辑，采用异步处理；增加进度条提示，提升用户体验</li>
        </ul>
    </li>
</ol>
                        `
                    }
                ]
            }
        };

        // 1. SHA512 加密核心函数（基于浏览器原生 Web Crypto API）
        async function sha512Encrypt(str) {
            const encoder = new TextEncoder();
            const data = encoder.encode(str);
            const hashBuffer = await crypto.subtle.digest('SHA-512', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(byte => byte.toString(16).padStart(2, '0')).join('').toUpperCase();
            return hashHex;
        }

        // 2. 登录验证功能（绑定表单提交事件）
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const usernameInput = document.getElementById('username').value.trim();
            const passwordInput = document.getElementById('password').value.trim();
            const loginError = document.getElementById('loginError');

            // 隐藏错误提示
            loginError.style.display = 'none';

            // 加密并验证
            const usernameHash = await sha512Encrypt(usernameInput);
            const passwordHash = await sha512Encrypt(passwordInput);
            const isValidUser = validUsers.some(user => 
                user.usernameHash === usernameHash && user.passwordHash === passwordHash
            );

            if (isValidUser) {
                // 登录成功
                isLoggedIn = true;
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('mainPage').classList.remove('hidden');
                document.getElementById('loginForm').reset();
            } else {
                // 登录失败
                loginError.style.display = 'block';
            }
        });

        // 3. 页面切换功能
        function switchPage(targetPageId) {
            // 未登录校验
            if (!isLoggedIn) {
                alert('请先登录系统！');
                document.getElementById('loginPage').classList.remove('hidden');
                document.getElementById('mainPage').classList.add('hidden');
                return;
            }

            // 隐藏所有页面
            const allPages = ['homePage', 'archivePage', 'orgsPage', 'aboutPage'];
            allPages.forEach(pageId => {
                document.getElementById(pageId).classList.add('hidden');
            });

            // 移除所有导航激活状态
            document.querySelectorAll('.navbar-link').forEach(link => {
                link.classList.remove('active');
            });

            // 显示目标页面并激活导航
            document.getElementById(targetPageId).classList.remove('hidden');
            event.target.classList.add('active');

            // 重置存档查询页面
            if (targetPageId === 'archivePage') {
                document.getElementById('archiveResult').classList.add('hidden');
                document.getElementById('archiveForm').reset();
            }
        }

        // 4. 退出登录功能
        function logout() {
            isLoggedIn = false;
            document.getElementById('mainPage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('archiveResult').classList.add('hidden');
            document.getElementById('archiveForm').reset();
        }

        // 5. 存档查询功能
        document.getElementById('archiveForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const archiveNoInput = document.getElementById('archiveNo').value.trim();
            const archiveResult = document.getElementById('archiveResult');
            const resultTitle = document.getElementById('resultTitle');
            const resultContent = document.getElementById('resultContent');
            const resultOrg = document.getElementById('resultOrg');
            const archiveDocuments = document.getElementById('archiveDocuments');

            // 重置结果
            archiveResult.classList.add('hidden');
            archiveDocuments.innerHTML = '';

            // 查询逻辑
            if (archiveDocLibrary[archiveNoInput]) {
                const archiveData = archiveDocLibrary[archiveNoInput];
                const org = archiveNoInput.split(':').pop();

                // 设置基础信息
                resultTitle.textContent = `存档查询成功 - ${archiveNoInput}`;
                resultContent.textContent = `共查询到 ${archiveData.docs.length} 份相关文档，详情如下：`;
                resultOrg.textContent = `所属分组织：${org}（${validOrgs.includes(org) ? '合法组织' : '未知组织'}）`;

                // 渲染文档详情
                archiveData.docs.forEach(doc => {
                    const docDiv = document.createElement('div');
                    docDiv.className = 'archive-document';
                    docDiv.innerHTML = `
                        <h4>${doc.title}</h4>
                        <div class="doc-content">${doc.content}</div>
                    `;
                    archiveDocuments.appendChild(docDiv);
                });

                // 显示结果
                archiveResult.classList.remove('hidden');
            } else {
                // 未查询到
                resultTitle.textContent = '存档查询失败';
                resultContent.textContent = `未找到编号为「${archiveNoInput}」的存档文档，请检查编号格式是否正确。`;
                resultOrg.textContent = '';
                archiveResult.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>